# FinWidget

'''Анализ банковских транзакций: веб-интерфейс, сервисы и отчёты из Excel-файлов.  
Проект реализован в рамках курсовой работы'''

###  Исходные данные:
Excel-файл `data/operations3.xlsx` с транзакциями.

###  Реализованные возможности:

-  `GET /operations` — фильтрация транзакций по статусу и валюте
-  `GET /categories` — получение уникальных категорий
-  `GET /summary` — агрегированная статистика по статусам
-  `GET /report` — генерация Excel-отчета по фильтрации
-  Покрытие тестами `pytest`, соблюдение стиля `black`, `isort`, `flake8`, `mypy`

##  Реализованные функции

###  Веб-страницы
- **/home** — главная страница: приветствие, траты по картам, топ-5 трат, курсы валют и акции
- **/operations** — фильтрация транзакций по статусу и валюте
- **/categories** — получение списка уникальных категорий операций
- **/summary** — общая статистика операций

###  Сервисы
- Конвертация валют через внешний API (USD, EUR → RUB)
- Загрузка пользовательских настроек `user_settings.json`
- Вспомогательные функции: приветствие по времени, фильтрация дат, загрузка Excel

###  Отчёты
- Генерация Excel-отчёта по отфильтрованным операциям (`generate_report`)

##  Тестирование
- `pytest`
- Покрытие 80%+
- Использованы `fixtures`, `mock`, `patch`, параметризация

##  Pre-commit хуки
- `black`, `isort`, `flake8`, `mypy`

## Веб-страницы

### `/home`
Главная страница с приветствием, тратами по картам, топ-5 тратами, курсами валют и котировками акций.

**Пример запроса:**
GET /home?date=2024-04-30%2010:30:00


**Параметры:**
- `date`: дата и время в формате `YYYY-MM-DD HH:MM:SS`

**Ответ:**
```json
{
  "greeting": "Доброе утро",
  "cards": [...],
  "top_transactions": [...],
  "currency_rates": {...},
  "stock_prices": {...}
}

---     
Пример запроса:
```
http://127.0.0.1:8000/home?date=2024-04-15%2010:30:00
```

##  Запуск
```bash
poetry install
poetry run uvicorn src.main:app --reload
```



